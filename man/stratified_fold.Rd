% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stratified_fold.R
\name{stratified_fold}
\alias{stratified_fold}
\title{Create stratified k-folds for cross-validation}
\usage{
stratified_fold(y_vec, k_folds)
}
\arguments{
\item{y_vec}{A numeric or character vector of the response variable. It will
be coerced to a factor internally.}

\item{k_folds}{An integer specifying the number of folds for cross-validation.}
}
\value{
An integer vector of fold IDs, with the same length as `y_vec`.
  Each observation is assigned a number from 1 to `k_folds`.
}
\description{
This function generates a vector of fold IDs for stratified k-fold
cross-validation, ensuring that each fold has approximately the same
proportion of the response variable's classes as the full dataset.
It is a wrapper for `caret::createFolds()` with added robust handling of
edge cases.
}
\details{
The function includes several checks to handle potential issues:
\itemize{
  \item If the number of observations is less than `k_folds`, it reduces `k_folds`
  to the number of observations and issues a warning.
  \item If only one class is present in the response variable, it falls back
  to simple random sampling and issues a warning.
  \item If the smallest class count is less than `k_folds`, it reduces `k_folds`
  to the smallest class count (or a minimum of 2) and issues a warning.
  \item If the call to `caret::createFolds()` fails for any reason, it also
  falls back to simple random sampling.
}
}
\examples{
# Example 1: Standard stratified folding
set.seed(123)
y <- c(rep(1, 40), rep(2, 60))
folds <- stratified_fold(y, k_folds = 10)
folds
table(y, folds)

# Example 2: Edge case with small number of observations
y_small <- c(1, 2, 1, 2)
folds_small <- stratified_fold(y_small, k_folds = 5)
folds_small
table(y_small, folds_small)

# Example 3: Edge case with only one class
y_single_class <- rep(1, 20)
folds_single <- stratified_fold(y_single_class, k_folds = 5)
folds_single
table(y_single_class, folds_single)

}
